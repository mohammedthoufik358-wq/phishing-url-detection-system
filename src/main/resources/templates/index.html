<!DOCTYPE html>
<html lang="en" xmlns:th="http://www.thymeleaf.org">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Suspicious URL Scanner</title>

    <link href="https://fonts.googleapis.com/css2?family=Orbitron:wght@400;600;800&display=swap" rel="stylesheet">

    <style>
        *{
            margin:0;
            padding:0;
            box-sizing:border-box;
            font-family:'Orbitron',sans-serif;
        }

        body{
            background:#000;
            min-height:100vh;
            overflow-y:auto;
            display:flex;
            justify-content:center;
            align-items:flex-start;
            padding:40px 0;
            color:#00ffcc;
        }

        canvas{
            position:fixed;
            top:0;
            left:0;
            z-index:-1;
        }

        .wrapper{
            width:90%;
            max-width:900px;
            text-align:center;
        }

        .title{
            font-size:48px;
            color:#00ffcc;
            text-shadow:0 0 15px #00ffcc;
            margin-bottom:30px;
        }

        .input-section{
            display:flex;
            justify-content:center;
            margin-bottom:40px;
        }

        form{
            display:flex;
            width:100%;
            justify-content:center;
            gap:10px;
            flex-wrap:wrap;
        }

        input{
            width:100%;
            max-width:600px;
            padding:14px;
            border-radius:8px;
            border:2px solid #00ff99;
            background:rgba(0,0,0,0.9);
            color:#00ffcc;
            font-size:16px;
            outline:none;
            box-shadow:0 0 10px rgba(0,255,153,0.3);
        }

        input::placeholder{
            color:#777;
        }

        button{
            background:#00e676;
            border:none;
            padding:14px 25px;
            border-radius:8px;
            cursor:pointer;
            font-weight:bold;
            transition:0.3s;
        }

        button:hover{
            background:#00ff99;
            box-shadow:0 0 20px #00ff99;
        }

        .result-card{
            padding:40px;
            border-radius:20px;
            border:2px solid #00ff99;
            background:rgba(0,0,0,0.9);
            box-shadow:
                0 0 10px #00ff99,
                0 0 40px rgba(0,255,153,0.6);
            margin-bottom:40px;
        }

        .result-title{
            font-size:32px;
            margin-bottom:20px;
            color:#00ffcc;
            text-shadow:0 0 10px #00ffcc;
        }

        .risk-score{
            margin:10px 0 20px 0;
            font-size:18px;
        }

        .progress-container{
            width:100%;
            height:25px;
            background:#222;
            border-radius:20px;
            overflow:hidden;
            margin-bottom:25px;
        }

        .progress-bar{
            height:100%;
            width:0%;
            background:#00ff99;
            border-radius:20px;
            transition:0.4s ease;
        }

        .details{
            line-height:1.8;
            font-size:18px;
            word-wrap:break-word;
        }

        .low{ color:#00ff99; }
        .medium{ color:orange; }
        .high{ color:red; }

        @media(max-width:768px){
            .title{
                font-size:32px;
            }
        }

    </style>
</head>
<body>

<canvas id="matrix"></canvas>

<div class="wrapper">

    <div class="title">
        ⚡ Suspicious URL Scanner ⚡
    </div>

    <div class="input-section">
        <form action="/scan" method="post">
            <input type="text" name="url" placeholder="Enter URL to scan..." th:value="${inputUrl}">
            <button type="submit">Scan</button>
        </form>
    </div>

    <div class="result-card" th:if="${riskScore != null}">
        <div class="result-title">Scan Result</div>

        <div class="risk-score">
            Risk Score: <span id="score" th:text="${riskScore} + '%'">0%</span>
        </div>

        <div class="progress-container">
            <div class="progress-bar" id="progress"
                 th:style="'width:' + ${riskScore} + '%'"></div>
        </div>

        <div class="details">
            <div>
                Risk Level:
                <span id="riskLevel"
                      th:text="${level}"
                      th:classappend="${level.toLowerCase()}">LOW</span>
            </div>
            <br>
            <div><strong>Detailed Report:</strong></div>
            <div th:each="entry : ${report}">
                <span th:text="${entry.key} + ' : ' + ${entry.value}"></span>
            </div>
        </div>
    </div>

</div>

<script>
    const canvas = document.getElementById("matrix");
    const ctx = canvas.getContext("2d");

    function resizeCanvas(){
        canvas.height = window.innerHeight;
        canvas.width = window.innerWidth;
    }
    resizeCanvas();
    window.addEventListener("resize", resizeCanvas);

    const letters = "ABCDEFGHIJKLMNOPQRSTUVWXYZ0123456789";
    const fontSize = 14;
    let columns = canvas.width / fontSize;
    let drops = [];

    function initDrops(){
        columns = canvas.width / fontSize;
        drops = [];
        for(let x=0;x<columns;x++)
            drops[x]=1;
    }
    initDrops();

    function draw(){
        ctx.fillStyle="rgba(0,0,0,0.05)";
        ctx.fillRect(0,0,canvas.width,canvas.height);

        ctx.fillStyle="#00ff99";
        ctx.font=fontSize+"px monospace";

        for(let i=0;i<drops.length;i++){
            const text=letters.charAt(Math.floor(Math.random()*letters.length));
            ctx.fillText(text,i*fontSize,drops[i]*fontSize);

            if(drops[i]*fontSize>canvas.height && Math.random()>0.975)
                drops[i]=0;

            drops[i]++;
        }
    }

    setInterval(draw,33);
</script>

</body>
</html>